<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Driver Learner Test Coach</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f2f2f2;
    }
    #quiz-container {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    #question-text {
      font-size: 18px;
      margin-bottom: 20px;
    }
    .option {
      background: #e0e0e0;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
      cursor: pointer;
    }
    .option:hover {
      background: #d5d5d5;
    }
    .selected {
      background: #90caf9;
    }
    #next-btn {
      margin-top: 20px;
      padding: 10px 15px;
      font-size: 16px;
    }
    #score-container {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 18px;
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      padding: 10px;
      border-radius: 5px;
    }
    #message-container {
      font-size: 16px;
      padding: 10px;
      margin-top: 20px;
      text-align: center;
      border-radius: 5px;
    }
    .correct {
      background-color: #4caf50;
      color: white;
      
    }
    .wrong {
      background-color: #f44336;
      color: white;
    }
    .emtpyBadge {
      background-color: ##fdfbfb08;
      color: white;
    }
    #nextDiv{
      background: ##fdfbfb08
      border-radius: 10px;
      padding: 20px;
      max-width: 600px;
      margin: auto;
     
    }

  </style>
</head>
<body>
  <div id="score-container">Score: 0</div>
  <div id="quiz-container">
    <h2 id="question-text">Loading question...</h2>
    <img id="question-image" src="" alt="" style="display: none; max-width: 100%; margin-top: 15px;" />
    <div id="options-container"></div>   
  </div>

  <div id="nextDiv"> 
    <button id="next-btn">Next</button>
    <div id="message-container"></div>
  </div>
  

  <script>
    let currentQuestion = 0;
    let score = 0;
    let selectedOption = null;
    let wrongQuestions = [];
    let questionsToUse = []; // Dynamic questions list
  
    const allQuestions = [  // <-- renamed from `questions` to `allQuestions`
      {
        "question": "Unless otherwise posted, what is the basic speed limit outside a city, town or village on a primary highway?",
        "options": ["100 km/h", "90 km/h", "110 km/h", "80 km/h"],
        "answer": "100 km/h"
      },
      {
        "question": "When backing a passenger vehicle to the left, a driver should:",
        "options": [
          "Look in the inside rear-view mirror and make steering adjustments as necessary",
          "Look over the right shoulder with occasional glances to the front",
          "Look over the left shoulder with occasional glances to the front",
          "Without shoulder checking, use the inside and outside rear-view mirrors to ensure the best view"
        ],
        "answer": "Look over the left shoulder with occasional glances to the front"
      },
      {
        "question": "When approaching an intersection and facing a traffic control light that is showing a green right-turn arrow and a red light, a driver:",
        "options": [
          "Must stop and wait for a green light before turning in the direction of the arrow",
          "May go straight through the intersection without stopping",
          "May proceed when safe, without stopping, in the direction of the arrow",
          "May turn left without stopping"
        ],
        "answer": "May proceed when safe, without stopping, in the direction of the arrow"
      },
      {
        "question": "Alberta has a demerit point system where a fully licenced (non-learner, non-probationary) driver is suspended when they accumulate:",
        "options": ["15 points", "8 points", "5 points", "12 points"],
        "answer": "15 points"
      },
      {
        "question": "When passing a large truck on a two-way highway, a driver should:",
        "options": [
          "Leave extra room before returning to their lane",
          "Return to their lane when signalled by the truck’s headlights",
          "Return to their lane when the truck is no longer visible in any of their rear-view mirrors",
          "Return to their lane once they have cleared the truck’s front bumper"
        ],
        "answer": "Leave extra room before returning to their lane"
      },
      {
        "question": "Which statement best describes the steps for turning right at a red traffic light?",
        "options": [
          "Right turns on a red traffic light are never permitted",
          "Signal and make sure there is no sign prohibiting the turn, stop, look left and right, yield the right-of-way, then proceed",
          "Reduce speed before the turn, look right for cyclists, signal and proceed",
          "Signal and reduce speed before the turn, look left, yield to vehicles and proceed"
        ],
        "answer": "Signal and make sure there is no sign prohibiting the turn, stop, look left and right, yield the right-of-way, then proceed"
      },    
      {
        "question": "This sign indicates:",
        "options": [
          "Route for vehicles over 4500 kg.",
          "Route for slow moving vehicles",
          "Reserved lane for buses",
          "Dangerous goods route"
        ],
        "answer": "Dangerous goods route",
        image: "images/Dangerous-goods.png"
      },
      {
        "question": "A single solid white line between driving lanes in an urban area means:",
        "options": [
          "It is a line separating traffic travelling in opposite directions",
          "Traffic on the right is moving faster than traffic on the left",
          "Lane changing is not permitted",
          "Lane change is permitted"
        ],
        "answer": "Lane changing is not permitted"
      },
      {
        "question": "A “parking lane” as defined in the Basic Licence Driver’s Handbook is:",
        "options": [
          "A lane closest to the curb, where parking is permitted but there are no meters",
          "All of these responses are correct",
          "That portion of a primary highway between the edge of the roadway to the right of the direction of traffic and the nearest solid white line, not being the centre line, marked on the roadway",
          "A lane immediately beside a row of parking meters in an urban area"
        ],
        "answer": "That portion of a primary highway between the edge of the roadway to the right of the direction of traffic and the nearest solid white line, not being the centre line, marked on the roadway"
      },
      {
        "question": "Shoulder checking means:",
        "options": [
          "Glancing towards the blind spot in the direction the driver intends to move",
          "Glancing into the left outside mirror",
          "Glancing into both the inside and outside mirrors",
          "Glancing into the right outside mirror"
        ],
        "answer": "Glancing towards the blind spot in the direction the driver intends to move"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Off-road facilities ahead",
          "Slippery when wet",
          "Uneven pavement",
          "Detour ahead"
        ],
        "answer": "Uneven pavement",
        image: "images/Uneven-pavement.png"
      },
      {
        "question": "A traffic-lane control light with an illuminated red “X” means:",
        "options": [
          "Prepare for an emergency vehicle travelling in that lane",
          "Reduce speed to below 30 km/h",
          "Use that lane only for the purpose of making left turns",
          "Travel is not permitted in that lane"
        ],
        "answer": "Travel is not permitted in that lane",
        image: "images/Travel-not-permited.png"
      },
      {
        "question": "Does a parent have the right to withdraw a previously given “parental consent” for someone under 18 years of age with respect to an operator’s licence?",
        "options": [
          "Yes, provided the person is still under the age of 18 and is not self-supporting or married",
          "Yes, provided that both parents verbally agree to withdraw the consent at a registry office",
          "No, once it is given it remains in effect until the person reaches 18 years of age",
          "No, but another consent form must be signed by both parents after a licence suspension"
        ],
        "answer": "Yes, provided the person is still under the age of 18 and is not self-supporting or married"
      },
      {
        "question": "When approaching a Yield sign, you must:",
        "options": [
          "Yield the right-of-way to traffic not facing the sign and all pedestrians in the intersection",
          "Always sound the horn to warn other traffic within the intersection",
          "Expect all other vehicles to yield the right-of-way to you",
          "Come to a stop and proceed after looking to the right and left"
        ],
        "answer": "Yield the right-of-way to traffic not facing the sign and all pedestrians in the intersection"
      },
      {
        "question": "The term “over-driving” your headlights at night means:",
        "options": [
          "The driver cannot see clearly for 1000 metres",
          "The low beam headlights are not set properly",
          "The driver is travelling at a speed which would not permit them to see an object in time to stop",
          "The driver has had the headlights on for too long a time"
        ],
        "answer": "The driver is travelling at a speed which would not permit them to see an object in time to stop"
      },
      {
        "question": "Under the Graduated Driver Licensing program, a driver will receive 2 demerits:",
        "options": [
          "For having more passengers than there are seat belts",
          "For not wearing a seat belt securely fastened",
          "For not wearing a seat belt",
          "For not wearing a seat belt properly adjusted"
        ],
        "answer": "For having more passengers than there are seat belts"
      },
      {
        "question": "Using the 2-second rule to judge a safe following distance when driving:",
        "options": [
          "Is more accurate on rural highways than in urban centres",
          "Is not accurate at speeds greater than 100 km/h",
          "Is accurate at any speed",
          "Is not accurate at speeds lower than 30 km/h"
        ],
        "answer": "Is accurate at any speed"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Traffic entering from the right",
          "Winding road ahead",
          "Curve right",
          "Concealed intersection on the right"
        ],
        "answer": "Curve right",
        image: "images/Curve-right.png"
      },
      {
        "question": "A driver approaching a flashing red traffic light must:",
        "options": [
          "Stop and wait for the flashing green light",
          "Reduce speed and proceed with caution",
          "Stop and proceed only when safe to do so",
          "Stop until the signal light turns green"
        ],
        "answer": "Stop and proceed only when safe to do so"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Do not enter",
          "Slow moving vehicles ahead",
          "Warning, Yield sign ahead",
          "Warning, traffic is approaching"
        ],
        "answer": "Warning, Yield sign ahead",
        image: "images/Warning-Yield-sign-ahead.png"
      },
      {
        "question": "According to the law in Alberta, it is the driver’s responsibility to ensure that all passengers under what age are properly restrained in the vehicle?",
        "options": [
          "18 years",
          "24 years",
          "21 years",
          "16 years"
        ],
        "answer": "16 years"
      },
      {
        "question": "When parallel parking, the vehicle’s wheels closest to the curb must be within what maximum distance?",
        "options": [
          "80 centimetres from the curb",
          "30 centimetres from the curb",
          "10 centimetres from the curb",
          "50 centimetres from the curb"
        ],
        "answer": "50 centimetres from the curb"
      },
      {
        "question": "Who is responsible and legally obligated to report any medical condition, change in health, or physical disability that may affect a driver’s ability to drive?",
        "options": [
          "The driver’s employer",
          "The driver",
          "The driver’s doctor",
          "The driver’s insurance company"
        ],
        "answer": "The driver"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Road narrows, left",
          "Two-way traffic",
          "Divided highway ends",
          "Obstruction – keep left"
        ],
        "answer": "Road narrows, left",
        image: "images/Road-narrows-left.png",
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Rumble strips",
          "Construction zone",
          "Bump",
          "Pavement ends"
        ],
        "answer": "Bump",
        image: "images/Bump.png"
      },
      {
        "question": "Under the Graduated Driver Licensing program, what is the minimum amount of time that a person must serve as a probationary Class 5 driver?",
        "options": [
          "6 months",
          "18 months",
          "2 years",
          "1 year"
        ],
        "answer": "2 years"
      },
      {
        "question": "A large “X” painted on the pavement indicates:",
        "options": [
          "Construction ahead",
          "The traffic lane is ending",
          "Railway crossing ahead",
          "Wild animal crossing ahead"
        ],
        "answer": "Railway crossing ahead"
      },
      {
        "question": "A driver is required to report all collisions to the police when persons have been injured or killed, or when combined damage to all vehicles or property is more than:",
        "options": [
          "$750",
          "$1000",
          "$250",
          "$500"
        ],
        "answer": "$1000"
      },
      {
        "question": "When a driver is stopping behind another vehicle in traffic:",
        "options": [
          "Remain a minimum of 10 metres from the vehicle ahead",
          "Allow sufficient space to move into another lane without reversing",
          "Maintain sufficient space as determined by the 2-second rule",
          "Keep back approximately 1 metre from the rear bumper of the vehicle ahead"
        ],
        "answer": "Allow sufficient space to move into another lane without reversing"
      },
      {
        "question": "If another vehicle is following too close, what should a driver do?",
        "options": [
          "Slow down gradually and encourage the other vehicle to pass",
          "Press hard on the brake pedal",
          "Increase speed to 10 km/h above the posted speed limit",
          "Activate the four-way flashers"
        ],
        "answer": "Slow down gradually and encourage the other vehicle to pass"
      },
      {
        "question": "When recovering from a skid, a driver should:",
        "options": [
          "Accelerate and steer in the opposite direction of the skid",
          "Brake and counter-steer",
          "Steer in the direction the driver wants the front of the vehicle to go",
          "Brake and hold firmly on the steering wheel"
        ],
        "answer": "Steer in the direction the driver wants the front of the vehicle to go"
      },
      {
        "question": "A “slow-moving vehicle” sign must be displayed on the rear of any vehicle that normally travels at speeds less than:",
        "options": [
          "50 km/h",
          "40 km/h",
          "70 km/h",
          "60 km/h"
        ],
        "answer": "40 km/h"
      },
      {
        "question": "A driver attempting to turn left at a steady green traffic light:",
        "options": [
          "Has the right-of-way over oncoming traffic",
          "Must stop before the pedestrian crosswalk line, then proceed",
          "Has the right-of-way over pedestrians",
          "Must not cross the path of an approaching vehicle unless it is safe"
        ],
        "answer": "Must not cross the path of an approaching vehicle unless it is safe"
      },
      {
        "question": "A “Weave Zone” is best described as:",
        "options": [
          "A place on a highway where the entrance and exit lanes are close together, and vehicles that are slowing to exit the highway must drive between vehicles that are accelerating to enter the highway",
          "An area on the highway that is used for emergency parking",
          "A place where the highway has a series of curves that require the driver to slow down",
          "A limited access area on a highway where a driver can legally back their vehicle when they miss their exit"
        ],
        "answer": "A place on a highway where the entrance and exit lanes are close together, and vehicles that are slowing to exit the highway must drive between vehicles that are accelerating to enter the highway"
      },
      {
        "question": "A road test will be refused by a driver examiner if:",
        "options": [
          "The vehicle has a seating capacity greater than 7",
          "The vehicle is registered as a farm vehicle",
          "The vehicle is a rental vehicle",
          "The vehicle is not mechanically safe"
        ],
        "answer": "The vehicle is not mechanically safe"
      },
      {
        "question": "Is a driver allowed to exceed the speed limit when passing another vehicle?",
        "options": [
          "Only when passing more than one vehicle at a time",
          "Yes, but not more than 10 km/h over the speed limit",
          "Yes, on primary highways only",
          "No, it is never permitted"
        ],
        "answer": "No, it is never permitted"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Children playing in residential area",
          "Pedestrian crosswalk ahead",
          "School area",
          "Playground zone"
        ],
        "answer": "School area",
        image: "images/School-area.png"
      }
      ,
      {
        "question": "The speed limit in a construction zone must be obeyed:",
        "options": [
          "Only during daylight hours",
          "Only when a flag person is posted nearby",
          "At all times",
          "Only when construction workers are present"
        ],
        "answer": "At all times"
      },
      {
        "question": "In a vehicle that does not have anti-lock brakes, threshold braking refers to:",
        "options": [
          "Applying an even braking force to the point just before the wheels lock, and easing off slightly if the wheels lock",
          "Pumping the brake pedal repeatedly until the vehicle comes to a stop",
          "Releasing pressure on the brake pedal, then reapplying pressure until the wheels lock",
          "Applying enough force to the brake pedal to lock the wheels and keep them locked"
        ],
        "answer": "Applying an even braking force to the point just before the wheels lock, and easing off slightly if the wheels lock"
      },
      {
        "question": "When a driver’s vehicle is approached by an emergency vehicle sounding a siren, from any direction on a two-way road, the driver must:",
        "options": [
          "Continue at a reduced speed and allow sufficient space for the emergency vehicle to pass",
          "Turn on their four-way hazard lights",
          "Stop only when the emergency vehicle has difficulty in passing",
          "Drive as close as possible to the right curb or edge of the road and stop"
        ],
        "answer": "Drive as close as possible to the right curb or edge of the road and stop"
      },
      {
        "question": "The recommended braking procedure to bring a vehicle to a normal, smooth stop is:",
        "options": [
          "Continually increase brake pressure until the wheels lock",
          "Shift the vehicle into neutral and apply steady pressure to the brake pedal until the vehicle comes to a stop",
          "Pump the brake pedal smoothly until the vehicle stops",
          "Apply brake pressure, ease off slightly just before the vehicle stops, then re-apply sufficient pressure to stop"
        ],
        "answer": "Apply brake pressure, ease off slightly just before the vehicle stops, then re-apply sufficient pressure to stop"
      },
      {
        "question": "In Alberta, the law requires that seat belts must be worn:",
        "options": [
          "Only while carrying passengers",
          "Properly at all times",
          "Only when driving at highway speeds",
          "Only when driving in the city"
        ],
        "answer": "Properly at all times"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Heavy trucks only",
          "Do not pass",
          "No vehicles allowed",
          "Do not enter"
        ],
        "answer": "Do not pass",
        image: "images/Do-not-pass.png"
      }, 
      {
        "question": "A driver entering a traffic circle:",
        "options": [
          "Must yield to traffic on the right",
          "Must yield to vehicles in the traffic circle",
          "Has the right-of-way",
          "Must use the courtesy rule and yield to the vehicle that arrived first"
        ],
        "answer": "Must yield to vehicles in the traffic circle"
      },
      {
        "question": "A deceleration lane is:",
        "options": [
          "A lane where vehicles reduce speed when exiting a highway",
          "The right lane of a four-lane highway for use by slower moving vehicles",
          "The lane immediately to the right of a solid yellow line on a highway",
          "A lane on hills for use by slower moving vehicles"
        ],
        "answer": "A lane where vehicles reduce speed when exiting a highway"
      },
      {
        "question": "When turning left from a two-way road onto a one-way road, what lane should the vehicle enter?",
        "options": [
          "The lane immediately to the right of centre",
          "The lane nearest the curb on the left side of the one-way road",
          "The centre lane of the one-way road",
          "The right lane of the one-way road"
        ],
        "answer": "The lane nearest the curb on the left side of the one-way road"
      },
      {
        "question": "When two vehicles approach an uncontrolled 'T' intersection at right angles to each other at approximately the same time:",
        "options": [
          "The vehicle on the left must yield the right-of-way",
          "The vehicle on the left has the right-of-way",
          "The vehicle going straight through always has the right-of-way",
          "Both vehicles must stop"
        ],
        "answer": "The vehicle on the left must yield the right-of-way"
      },
      {
        "question": "Unless otherwise permitted, what lane must a driver be in to turn left from a one-way road?",
        "options": [
          "The lane to the right of centre",
          "The left lane nearest the left curb",
          "The lane closest to the right curb",
          "The centre lane"
        ],
        "answer": "The left lane nearest the left curb"
      },
      {
        "question": "Which statement describes the steps required to reverse in a straight line?",
        "options": [
          "Keep both hands on the steering wheel and constantly use the inside rear-view mirror for guidance",
          "Place the right hand at the top of the steering wheel, look over the left shoulder and use the outside left rear-view mirror",
          "Place the left hand at the top of the steering wheel and look over the right shoulder through the rear window",
          "Place the left hand at the bottom of the steering wheel and use both outside mirrors"
        ],
        "answer": "Place the left hand at the top of the steering wheel and look over the right shoulder through the rear window"
      },
      {
        "question": "An acceleration lane is:",
        "options": [
          "A lane with broken line markings",
          "A lane on hills, designated for faster moving vehicles",
          "The left lane of a four-lane highway, for use when passing slow moving vehicles",
          "A lane in a merge area for use by vehicles entering the highway"
        ],
        "answer": "A lane with broken line markings"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Lane ends, loss of right lane",
          "Added lane (free flow)",
          "Curve right",
          "Dual turn lane ahead"
        ],
        "answer": "Lane ends, loss of right lane",
        image: "images/Lane-ends-loss-of-right-lane.png"
      }, 
      {
        "question": "Under the Graduated Driver Licensing program, a learner with a Class 7 licence is not permitted to drive a vehicle between the hours of:",
        "options": [
          "9:00 A.M. and 5:00 P.M.",
          "Midnight and 5:00 A.M.",
          "10:00 P.M. and 6:00 A.M.",
          "Midnight and 7:00 A.M."
        ],
        "answer": "Midnight and 5:00 A.M."
      },
      {
        "question": "What does a flashing yellow traffic light mean?",
        "options": [
          "The traffic light will turn green",
          "Stop until the light stops flashing",
          "The traffic light will turn red",
          "Proceed with caution"
        ],
        "answer": "The traffic light will turn red"
      },
      {
        "question": "Unless otherwise posted, the school zone speed limits are in effect on school days during the following hours:",
        "options": [
          "8:30 A.M. to 1 hour after sunset",
          "8:00 A.M. to 9:30 A.M., 11:30 A.M. to 1:30 P.M. and 3:00 P.M. to 4:30 P.M.",
          "8:30 A.M. to 9:30 A.M., 12:00 P.M. to 1:00 P.M. and 3:30 P.M. to 4:00 P.M.",
          "8:00 A.M. to 4:30 P.M."
        ],
        "answer": "8:00 A.M. to 9:30 A.M., 11:30 A.M. to 1:30 P.M. and 3:00 P.M. to 4:30 P.M."
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Playground zone Pedestrian",
          "crosswalk",
          "Designated school bus stop",
          "School zone"
        ],
        "answer": "crosswalk",
        image: "images/crosswalk.png"
      },
      {
        "question": "When driving in the right lane on a highway, what should a driver do if another vehicle attempts to merge from an acceleration lane on the right?",
        "options": [
          "Stop to allow the other vehicle in",
          "Accelerate to close any gap in the traffic flow",
          "Move into the left lane if it is safe to do so, or be prepared to adjust speed",
          "Insist that the other vehicle yield the right-of-way"
        ],
        "answer": "Move into the left lane if it is safe to do so, or be prepared to adjust speed"
      },
      {
        "question": "Which direction should a vehicle’s front wheels be turned when parked uphill on a two-way road with a curb?",
        "options": [
          "Parallel to the curb",
          "To the left",
          "To the right",
          "Straight ahead"
        ],
        "answer": "To the left"
      },
      {
        "question": "When approaching the rear of a stopped school bus that has its alternately flashing red lights activated, a driver must:",
        "options": [
          "Sound the horn to alert any pedestrians and pass at a slow rate of speed",
          "Stop behind the bus and wait until the alternating red lights stop flashing",
          "Move to the left lane, reduce speed to 30 km/h and pass cautiously",
          "Stop behind the bus, look carefully for pedestrians and, if clear, drive past the bus slowly"
        ],
        "answer": "Stop behind the bus and wait until the alternating red lights stop flashing"
      },
      {
        "question": "When travelling in urban areas, drivers should scan the road approximately:",
        "options": [
          "25 to 30 seconds ahead",
          "12 to 15 seconds ahead",
          "20 to 30 seconds ahead",
          "1 to 6 seconds ahead"
        ],
        "answer": "12 to 15 seconds ahead"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "T intersection",
          "Traffic lane ends",
          "Concealed intersection",
          "Trucks entering highway ahead"
        ],
        "answer": "T intersection",
        image: "images/T-intersection.png"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Winding road ahead",
          "Weave zone ahead",
          "Slippery when wet",
          "Lane changing permitted"
        ],
        "answer": "Winding road ahead",
        image: "images/Winding-road-ahead.png"
      },
      {
        "question": "Before leaving a parallel parking space on the right side of a road:",
        "options": [
          "Turn on the right signal",
          "Shoulder check to the left",
          "Shoulder check to the right",
          "Use an arm signal straight out and up"
        ],
        "answer": "Shoulder check to the left"
      },
      {
        "question": "When approaching the top of a hill on a two-lane highway:",
        "options": [
          "Exceeding the speed limit is permitted",
          "Flash the headlights to warn oncoming vehicles",
          "Stay to the right portion of the lane",
          "Keep close to the centre line to prevent others from passing"
        ],
        "answer": "Stay to the right portion of the lane"
      },
      {
        "question": "Playground zones are in effect:",
        "options": [
          "From 8:30 A.M. to 1 hour after sunset",
          "From 8:00 A.M. to 8:00 P.M.",
          "During daylight hours and until 11:00 P.M.",
          "Only when school lets out at noon and after 4:30 P.M."
        ],
        "answer": "From 8:30 A.M. to 1 hour after sunset"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "T intersection",
          "Winding road ahead",
          "Merging traffic",
          "Road narrows to the right"
        ],
        "answer": "Merging traffic",
        image: "images/Merging-traffic.png"
      },
      {
        "question": "According to the Basic Licence Driver’s Handbook, most skids are the result of:",
        "options": [
          "Bad brakes",
          "Icy roads",
          "Bad tires",
          "Driver error"
        ],
        "answer": "Driver error"
      },
      {
        "question": "How close can a driver legally park a vehicle to a Stop sign?",
        "options": [
          "10 metres",
          "5 metres",
          "3 metres",
          "1.5 metres"
        ],
        "answer": "5 metres"
      },
      {
        "question": "Parking in a space reserved for persons with disabilities is permitted:",
        "options": [
          "When all other parking spaces are filled",
          "While the driver is waiting in the vehicle",
          "When a driver stops for less than 5 minutes",
          "When the vehicle has a proper identifying placard or licence plate"
        ],
        "answer": "When the vehicle has a proper identifying placard or licence plate"
      },
      {
        "question": "At what minimum distance must headlights be dimmed at night when approaching another vehicle from behind?",
        "options": [
          "60 metres",
          "300 metres",
          "150 metres",
          "100 metres"
        ],
        "answer": "150 metres"
      },
      {
        "question": "When are dual turns permitted at an intersection?",
        "options": [
          "Only when turning from a one-way road onto a one-way road",
          "Only when indicated by pavement markings or traffic control signs",
          "Any time there are at least 2 lanes on the road being entered",
          "Only when the road has 6 or more lanes"
        ],
        "answer": "Only when indicated by pavement markings or traffic control signs",
        image: "images/Dual-turns-permitted.png"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Through lane only",
          "Passing permitted",
          "No turns permitted",
          "Two-way traffic"
        ],
        "answer": "Two-way traffic",
        image: "images/Two-way-traffic.png"
      },
      {
        "question": "Under the Graduated Driver Licensing program, a learner with a Class 7 operator’s license is suspended when they accumulate:",
        "options": [
          "15 demerits",
          "12 demerits",
          "8 demerits",
          "7 demerits"
        ],
        "answer": "15 demerits"
      },
      {
        "question": "Speed limit signs indicate:",
        "options": [
          "The speed you should travel under all driving conditions",
          "The minimum speed permitted on all highways",
          "The maximum speed permitted when conditions are favourable",
          "The maximum speed permitted except when passing"
        ],
        "answer": "The maximum speed permitted when conditions are favourable"
      },
      {
        "question": "An 'uncontrolled intersection':",
        "options": [
          "Has a flashing yellow light for one direction of traffic and a flashing red light for the other direction of traffic",
          "Has traffic signs but no traffic control signal lights",
          "Has no traffic control signal lights or traffic signs",
          "Has Yield signs but no Stop signs"
        ],
        "answer": "Has no traffic control signal lights or traffic signs"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Sharp left curve in the road ahead",
          "Left turns are prohibited",
          "Vehicles may turn left or go straight",
          "Double lane left turn"
        ],
        "answer": "Double lane left turn",
        image: "images/Double-lane-left-turn.png"
      },
      {
        "question": "When facing a Merge sign a driver should:",
        "options": [
          "Stop at the entrance to the other highway and wait until a gap in traffic occurs before proceeding",
          "Watch for a gap in traffic on the highway they are entering, adjust to highway speed in the acceleration lane and blend in smoothly",
          "Stop and yield the right-of-way to traffic already on the highway",
          "Reduce speed and proceed with caution"
        ],
        "answer": "Watch for a gap in traffic on the highway they are entering, adjust to highway speed in the acceleration lane and blend in smoothly"
      },
      {
        "question": "In reduced visibility due to fog, smoke or snow, use the:",
        "options": [
          "Park lights",
          "Headlights on high beam",
          "Headlights on low beam",
          "Daytime running lights"
        ],
        "answer": "Headlights on low beam"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Emergency vehicles entering roadway",
          "The designated lane is closed",
          "Railway crossing",
          "Do not enter"
        ],
        "answer": "Railway crossing",
        image: "images/Do-not-enter.png"
      },
      {
        "question": "Is a driver allowed to turn right at a red traffic control light?",
        "options": [
          "Yes, but only when a sign permits such a turn",
          "Yes, if the driver reduces speed and there is no traffic or pedestrian in the intersection, and no sign that prohibits such a turn",
          "Yes, if the driver stops and there is no traffic, pedestrian or sign that prohibits such a turn",
          "No, right turns on a red traffic light are never permitted"
        ],
        "answer": "Yes, if the driver reduces speed and there is no traffic or pedestrian in the intersection, and no sign that prohibits such a turn"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Lane is reserved for use by the specified vehicles",
          "One-way traffic only",
          "Car pool vehicles only",
          "Lane can be used for dangerous goods vehicles"
        ],
        "answer": "Lane is reserved for use by the specified vehicles",
        image: "images/Lane-reserved-for-use.png"
      },
      {
        "question": "When a vehicle is stopped to allow a pedestrian to cross the road, other vehicles that are approaching from the rear:",
        "options": [
          "May pass the stopped vehicle if there is no oncoming traffic that may impede passing safely",
          "Must not pass the stopped vehicle. It is illegal",
          "May pass the stopped vehicle when eye contact is made with the pedestrian and the pedestrian stops",
          "May pass the stopped vehicle when the pedestrian crossing signal has changed to “Don’t Walk”"
        ],
        "answer": "Must not pass the stopped vehicle. It is illegal"
      },
      {
        "question": "When a head restraint is raised to the proper position, the centre of the head restraint is:",
        "options": [
          "Level with the top of the ears",
          "Level with the top of the shoulders",
          "Level with the neck",
          "Level with the top of the head"
        ],
        "answer": "Level with the top of the ears"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "School zone ahead",
          "Caution log trucks turning",
          "Traffic control signal advance warning",
          "Pedestrian crosswalk ahead"
        ],
        "answer": "Traffic control signal advance warning",
        image: "images/Traffic-control-signal-advance-warning.png"
      },
      {
        "question": "When a “PASSING LANE AHEAD” sign is posted, the driver of a slower moving vehicle should:",
        "options": [
          "Use the right lane and reduce their speed to half the posted speed limit",
          "Use the left lane only",
          "Increase speed",
          "Move into the right lane when safe"
        ],
        "answer": "Move into the right lane when safe"
      },
      {
        "question": "When approaching the rear of a school bus that is displaying alternating flashing amber lights, a driver should:",
        "options": [
          "Be prepared to stop as this is a warning that the alternating flashing red lights will come on once the bus has stopped",
          "Be prepared to stop as this could be a warning that there is a collision ahead and the traffic flow has stopped",
          "Stop immediately because the school bus is loading or unloading students",
          "Use caution as the school bus is approaching a railroad crossing and is about to stop"
        ],
        "answer": "Be prepared to stop as this is a warning that the alternating flashing red lights will come on once the bus has stopped"
      },
      {
        "question": "In the Basic Licence Driver’s Handbook, “nighttime” is defined as the period of time:",
        "options": [
          "Beginning 1 hour before sunset and ending 1 hour after the following sunrise",
          "Beginning at sunset and ending at the following sunrise",
          "Between 7:00 P.M. and 7:00 A.M.",
          "Beginning 1 hour after sunset and ending 1 hour before the following sunrise"
        ],
        "answer": "Beginning 1 hour after sunset and ending 1 hour before the following sunrise"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "No through traffic or right turns",
          "Turn left or go straight through",
          "Turn from a one-way road onto a one-way road",
          "Straight through or right turn"
        ],
        "answer": "Straight through or right turn",
        image: "images/Straight-through-or-right-turn.png"
      },
      {
        "question": "A vehicle exiting a parking lot onto a roadway:",
        "options": [
          "Must stop only if there is a Stop sign",
          "Must come to a complete stop",
          "Must stop before crossing the sidewalk only if there are pedestrians present",
          "Is not required to stop"
        ],
        "answer": "Must come to a complete stop"
      },
      {
        "question": "When approaching a railway crossing that has the flashing red light and bell activated:",
        "options": [
          "Cross the tracks if the train is a minimum of 250 metres away",
          "Reduce speed, check for trains, and then proceed across the tracks",
          "Do not stop and do not change gears while crossing the tracks",
          "Stop at least 5 metres from the nearest rail until the train has passed"
        ],
        "answer": "Stop at least 5 metres from the nearest rail until the train has passed"
      },
      {
        "question": "The recommended method for travelling through a curve on a highway is:",
        "options": [
          "Reduce speed before the curve, stay in the lane and gently accelerate after entering the curve",
          "Maintain speed before the curve, brake in the curve, look ahead and accelerate out of the curve",
          "Cover the brake pedal before the curve, counter-steer toward the outside of the lane and accelerate when exiting",
          "Accelerate before the curve, cover the brake pedal in the curve and accelerate after leaving the curve"
        ],
        "answer": "Reduce speed before the curve, stay in the lane and gently accelerate after entering the curve"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Yield the right-of-way to pedestrians and traffic",
          "Dangerous goods vehicle placard: flammable gas",
          "Slow moving vehicle",
          "Warning, Yield sign ahead"
        ],
        "answer": "Slow moving vehicle",
        image: "images/Slow-moving-vehicle.png"
      },
      {
        "question": "Why is it not safe to pass a loaded log-haul truck that is turning?",
        "options": [
          "The driver of the truck needs to fully concentrate on the turn and does not need the added responsibility of a passing vehicle",
          "Loaded log-haul trucks obey the 6-second rule for turns",
          "A danger zone exists as the overhang of the logs from the tail end of the truck could block all the lanes on a highway during the turn",
          "It is illegal to do so"
        ],
        "answer": "A danger zone exists as the overhang of the logs from the tail end of the truck could block all the lanes on a highway during the turn"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Playground zone ahead",
          "Pedestrian crossing ahead",
          "School bus stop ahead",
          "School zone ahead"
        ],
        "answer": "School bus stop ahead",
        image: "images/School-bus-stop-ahead.png"
      },
      {
        "question": "When encountering a funeral procession that is crossing an intersection:",
        "options": [
          "Sound the horn before proceeding",
          "Proceed through the funeral procession only when there is sufficient space between vehicles",
          "Yield the right-of-way and do not break through the procession",
          "Flash the high beam headlights before proceeding"
        ],
        "answer": "Yield the right-of-way and do not break through the procession"
      },
      {
        "question": "If the vehicle’s right tires travel off the paved portion of the roadway:",
        "options": [
          "Apply the brakes and counter-steer to return to the paved portion of the roadway",
          "Keep a firm grip on the steering wheel, ease off the gas pedal, and then gradually return to the paved portion of the roadway",
          "Accelerate slightly, then turn the steering wheel sharply to return to the paved portion of the roadway",
          "Move the vehicle completely off the paved portion, then steer back onto the paved portion of the roadway"
        ],
        "answer": "Accelerate slightly, then turn the steering wheel sharply to return to the paved portion of the roadway"
      },
      {
        "question": "The sign indicates:",
        "options": [
          "A school zone",
          "School crosswalk ahead",
          "Playground zone",
          "Pedestrian activated lights ahead"
        ],
        "answer": "School crosswalk ahead",
        image: "images/School-crosswalk-ahead.png"
      }, 
      {
        "question": "When completing an angle park, the vehicle’s front wheel must be within what maximum distance from the nearest curb?",
        "options": [
          "100 cm",
          "50 cm",
          "25 cm",
          "75 cm"
        ],
        "answer": "50 cm"
      },
      {
        "question": "In an urban area, when a pedestrian is standing at a crosswalk with their arm raised at approximately right angles to their body and pointing to the opposite curb, what does this mean?",
        "options": [
          "Drivers must stop and yield to the pedestrian",
          "The pedestrian is visually impaired and needs assistance to cross the road",
          "Drivers do not have to yield to the pedestrian until they step off the curb",
          "Drivers should reduce speed to 20 km/h and be cautious when passing the pedestrian"
        ],
        "answer": "Drivers must stop and yield to the pedestrian"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Pavement ends",
          "Construction zone ahead",
          "Dead end",
          "Hazard marker"
        ],
        "answer": "Dead end",
        image: "images/Dead-end.png"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Divided highway ends",
          "Divided highway begins",
          "Obstruction – pass on the left",
          "Two-way traffic"
        ],
        "answer": "Divided highway begins",
        image: "images/Divided-highway-begins.png"
      },
      {
        "question": "When approaching an intersection displaying a steady yellow traffic light:",
        "options": [
          "Proceed since the light is about to turn green",
          "Yield to vehicles on the right",
          "Stop before the intersection unless the stop cannot be made in safety",
          "Increase speed to clear the intersection"
        ],
        "answer": "Stop before the intersection unless the stop cannot be made in safety"
      },
      {
        "question": "A solid yellow line together with a broken yellow line marked on the centre of a highway means:",
        "options": [
          "The road narrows ahead",
          "If the solid line is on your side, passing is permitted",
          "If the broken line is on your side, passing is not permitted",
          "If the broken line is on your side, passing is permitted"
        ],
        "answer": "If the broken line is on your side, passing is permitted"
      },
      {
        "question": "At 9:00 A.M. on a school day, what is the maximum speed permitted in a school zone in a rural area, unless otherwise posted?",
        "options": [
          "50 km/h",
          "20 km/h",
          "40 km/h",
          "30 km/h"
        ],
        "answer": "30 km/h"
      },
      {
        "question": "On a two-lane highway, when passing other vehicles travelling in the same direction, a driver:",
        "options": [
          "Should pass on the left when safe",
          "Should pass on the right when safe",
          "Should always travel 30 km/h faster than the vehicle being passed",
          "Should not pull out to pass until they are within 3 metres of the vehicle being passed"
        ],
        "answer": "Should pass on the left when safe"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Off-road facilities",
          "Hospital services",
          "Hotel services",
          "Primary highway route marker"
        ],
        "answer": "Hospital services",
        image: "images/Hospital-services.png"
      },
      {
        "question": "What minimum distance from a fire hydrant must a vehicle be parked?",
        "options": [
          "3 metres",
          "4 metres",
          "2 metres",
          "5 metres"
        ],
        "answer": "5 metres"
      },
      {
        "question": "This sign indicates:",
        "options": [
          "Construction sign, flag person ahead",
          "Construction sign, detour ahead",
          "Caution, falling rock ahead",
          "Construction sign, people working ahead"
        ],
        "answer": "Construction sign, people working ahead",
        image: "images/Construction-sign-people-working-ahead.png"
      },
      {
        "question": "If a driver is being followed by a vehicle that is attempting to pass on a two-way road, the driver should:",
        "options": [
          "Stay in the lane and move to the left portion of the lane",
          "Stay in the lane and move to the right portion of the lane",
          "Turn on the left signal and stay in the lane",
          "Turn on the right signal and drive in the parking lane"
        ],
        "answer": "Stay in the lane and move to the right portion of the lane"
      }
    ];

    const seenQuestions = new Set();
const duplicates = [];

allQuestions.forEach((question) => {
  if (seenQuestions.has(question.question)) {
    duplicates.push(question);
  } else {
    seenQuestions.add(question.question);
  }
});

console.log('Duplicates found:', duplicates);
  
    function loadScore() {
      // console.log(`Score: ${score}/${questionsToUse.length}`);
      const scoreContainer = document.getElementById('score-container');
      scoreContainer.textContent = `Score: ${score}/${questionsToUse.length}`;
    }
  
    function showQuestion() {
      const q = questionsToUse[currentQuestion];
      console.log(q.question);
      document.getElementById('question-text').textContent = q.question;
  
      const imageElement = document.getElementById('question-image');
      if (q.image) {
        imageElement.src = q.image;
        imageElement.style.display = 'block';
      } else {
        imageElement.style.display = 'none';
      }
  
      const optionsContainer = document.getElementById('options-container');
      optionsContainer.innerHTML = '';
      selectedOption = null;
      document.getElementById('message-container').textContent = '';
      document.getElementById('message-container').className = 'emtpyBadge';
  
      q.options.forEach(option => {
        const div = document.createElement('div');
        div.textContent = option;
        div.classList.add('option');
        div.addEventListener('click', () => {
          if (selectedOption) return;
  
          document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
          div.classList.add('selected');
          selectedOption = option;
  
          const correctAnswer = q.answer;
          const messageContainer = document.getElementById('message-container');
  
          if (selectedOption === correctAnswer) {
            messageContainer.textContent = 'Correct answer!';
            messageContainer.className = 'correct';
            score++;
          } else {
            messageContainer.textContent = `Wrong answer! The correct answer was: ${correctAnswer}`;
            messageContainer.className = 'wrong';
            wrongQuestions.push(q);
  
            document.querySelectorAll('.option').forEach(option => {
              if (option.textContent === correctAnswer) {
                option.style.backgroundColor = "green";
              }
            });
          }
  
          loadScore();
        });
  
        optionsContainer.appendChild(div);
      });
    }
  
    document.getElementById('next-btn').addEventListener('click', () => {
      if (!selectedOption) {
        alert('Please select an answer.');
        return;
      }
  
      currentQuestion++;
  
      if (currentQuestion < questionsToUse.length) {
        showQuestion();
      } else {
        showCompleteQuiz();
      }
    });
  
    function restartQuiz() {
      currentQuestion = 0;
      score = 0;
      wrongQuestions = [];
      questionsToUse = [...allQuestions]; // Reset full question set
      LoadQuestionCard();
      loadScore();
      showQuestion();
    }


    function showCompleteQuiz()
    {
      document.getElementById('message-container').textContent = '';
      document.getElementById('message-container').className = 'emtpyBadge';
      document.getElementById('next-btn').style.display = 'none';


      const container = document.getElementById('quiz-container');
        container.innerHTML = `
          <h2>Quiz Complete!</h2>
          <p>Your final score is: ${score}/${questionsToUse.length}</p>
          <button id="restart-btn">Restart</button>
          ${wrongQuestions.length > 0 ? `<button id="retake-wrong-btn" style="margin-left:80px;">Retake Wrong Items</button>` : ""}
        `;
  
        document.getElementById('restart-btn').addEventListener('click', restartQuiz);
  
        if (wrongQuestions.length > 0) {
          document.getElementById('retake-wrong-btn').addEventListener('click', retakeWrongQuestions);
        }
    } 

    function LoadQuestionCard()
    {
      document.getElementById('next-btn').style.display = 'inline-block';


       const container = document.getElementById('quiz-container');
       container.innerHTML = `
             <h2 id="question-text">Loading question...</h2>
            <img id="question-image" src="" alt="" style="display: none; max-width: 100%; margin-top: 15px;" />
            <div id="options-container"></div>           
           
        `;       
    }
  
    function retakeWrongQuestions() {
      document.getElementById('next-btn').style.display = 'inline-block';

      if (wrongQuestions.length === 0) return;
  
      questionsToUse = [...wrongQuestions];

       
      
      wrongQuestions = [];
      currentQuestion = 0;
      score = 0;
      LoadQuestionCard();
      loadScore();
      showQuestion();
    }
  
    // Initialize the quiz
    questionsToUse = [...allQuestions];
    loadScore();
    showQuestion();
  </script>
  
</body>
</html>
